<!DOCTYPE html>
<html>
<head>
    <title>Example</title>
    <link rel="stylesheet" type="text/css" href="./css/ember.dialog.min.css">
</head>
<body style="position: absolute; width: 100%; height: 100%; min-height: 100%; padding:0; margin: 0">

    <script type="text/x-handlebars">
        <h2>Notice</h2>
        <button type="button" {{action showNoticeHalf}}>Show notice (0.5 sec)</button>
        <button type="button" {{action showNoticeFive}}>Show notice (5 sec)</button>
        <button type="button" {{action showNoticeTen}}>Show notice (10 sec)</button>
        <button type="button" {{action showNoticeUnlimited}}>Show notice (Unlimited)</button>

        <h2>Confirm</h2>
        <button type="button" {{action showConfirm}}>Show confirm</button>
        <button type="button" {{action showConfirmSubstrated}}>Show substrated confirm</button>
        <button type="button" {{action showConfirmNested}}>Show nested confirm</button>
        <button type="button" {{action showConfirmDesigned}}>Show stylish confirm</button>
        
        <h2>Alert</h2>
        <button type="button" {{action showAlert}}>Show alert</button>
    </script>

    <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
    <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/handlebars.js/1.3.0/handlebars.js"></script>
    <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/ember.js/1.5.1/ember.js"></script>
    <script type="text/javascript" src="./js/loader.js"></script>
    <script type="text/javascript" src="./js/ember.dialog.min.js"></script>
    <script type="text/javascript">
    var App = Ember.Application.create();
    App.ApplicationController = Ember.Controller.extend({
        init: function() {
            this.m = this.get('dialogManager');
        },
        actions: {
            showNoticeHalf: function() { this.m.notice("Hello, I'm noticed message (500 ms)", 500); },
            showNoticeFive: function() { this.m.notice("Hello, I'm noticed message (5 sec)"); },
            showNoticeTen: function() { this.m.notice("Hello, I'm noticed message (10 sec)", 10000); },
            showNoticeUnlimited: function() { this.m.notice("Hello, I'm noticed message (Unlimited)", Infinity); },

            showConfirm: function() {
                var m = this.m;
                var p = m.confirm("Hello, I'm confirm", null, {title: 'Simple confirm'});
                var accept = function() {
                    m.notice("You choose YES");
                };
                var decline = function() {
                    m.notice("You choose NO");
                };
                p.then(accept, decline);
            },

            showConfirmSubstrated: function() {
                var self = this;
                var m = this.m;
                var p = m.confirm("Hello, I'm confirm", null, {title: 'Substrated confirm', substrate:true});
                var accept = function() {
                    m.notice("You choose YES");
                };
                var decline = function() {
                    var p = m.confirm("Are U happy?");
                    var accept = function() {};
                    var decline = function() {
                        console.log(self.send('showConfirmSubstrated'));
                    };
                    p.then(accept, decline);
                };
                p.then(accept, decline);
            },

            showConfirmNested: function() {
                var self = this;
                var m = this.m;
                var bind = Ember.run.bind;
                var c = Ember.Controller.extend({
                    actions: {
                        accept: function(modal) {
                            m.confirm("ACCEPT?", null, {title: 'Substrated confirm', substrate:true}).then(bind(modal, modal.close));
                            return false;  // That's meen don't close (dont bubble event up to the dialog-component)
                        },
                        decline: function(modal) {
                            m.confirm("DECLINE?", null, {title: 'Substrated confirm', substrate:true}).then(bind(modal, modal.close));;
                        }
                    }
                }).create();
                m.confirm("Hello, I'm confirm", c, {title: 'Nested confirm'});
            },

            showConfirmDesigned: function() {
                this.m.confirm("Hello, I'm confirm", null, {title: 'Stylish confirm', 'className': 'asd'});
            },

            showAlert: function() {
                this.m.alert("Read this text").then(function() {
                    alert("asd")
                });
            },
        }
    });
    </script>
</body>
</html>